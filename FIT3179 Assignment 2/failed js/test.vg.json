{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "title": "Suicide Rates in Europe Year 2016",
    "width": 570,
    "height": 300,
    "projection": {"type": "equirectangular"},
    "params": [
      {
        "name": "Year_selection",
        "value": 2010,
        "bind": {
          "input": "range",
          "min": 2000,
          "max": 2016,
          "step": 1,
          "name": "Year:  "
        }
      }
    ],
    "layer": [{
      "data": {
          "url": "js/ne_110m.json", "format": { "type": "topojson",    "feature": "ne_110m_admin_0_countries"}
              },
        "transform": [
          {
            "calculate": "'Data is not available in ' + datum.properties.NAME",
            "as": "note"
          }
        ],
        "mark": {"type": "geoshape", "fill": "lightgray", "stroke": "white"},
        "encoding": {"tooltip": {"field": "note"}}
      },
      {
        "data": {
          "url": "js/ne_110m.json",
          "format": {"type": "topojson", "feature": "ocean1"}
        },
        "mark": {"type": "geoshape", "fill": "skyblue"}
      },
      {
        "data": {
          "url": "js/ne_110m.json",
          "format": {"type": "topojson", "feature": "ocean2"}
        },
        "mark": {"type": "geoshape", "fill": "skyblue"}
      },
      {
        "data": {
            "url": "data/FIT3179_A2_Countries.csv"
        },
        "transform": [{
                "lookup": "country",
                "from": {
                    "data": {
                        "url": "js/ne_110m.json",
                        "format": {
                            "type": "topojson",
                            "feature": "ne_110m_admin_0_countries"
                        }
                    },
                    "key": "properties.NAME"
                },
                "as": "geo"
                  },
          {"filter": "datum.year == Year_selection"}
        ],
        "mark": {"type": "geoshape", "stroke": "white"},
        "encoding": {
          "color": {
            "field": "suicide_rate",
            "type": "quantitative",
            "scale": {
              "type": "threshold",
              "domain": [5, 10, 15, 20, 25],
              "range": [
                "#00b300",
                "#009a00",
                "#008000",
                "#006700",
                "#004d00",
                "#003400"
              ]
            }
          },
          "tooltip": [
            {"field": "properties.NAME", "type": "nominal", "title": "Country"},
            {"field": "suicide_rate", "type": "quantitative", "format": ".2f"},
            {"field": "population", "type": "quantitative"},
            {"field": "gdp_per_capita", "type": "quantitative"},
            {"field": "year", "type": "nominal"}
          ]
        }
      }
    ],
    "config": {}
  }